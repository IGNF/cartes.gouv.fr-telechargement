server {
    listen       8080;
    server_name  localhost;

    # Pour corriger /telechargement sans slash final
    location = /telechargement {
        return 301 $scheme://$host/telechargement/;
    }

    # La route React : /telechargement/*
    location /telechargement/ {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri /index.html; # Redirige toutes les requÃªtes vers index.html
    }

    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root /usr/share/nginx/html;
    }
}
# Default Nginx configuration for serving the React app
# This configuration assumes that the React app is built and the files are located in /usr/share/nginx/html/
# The base path is set to /telechargement/ to match the Vite configuration
# The try_files directive is used to serve the index.html file for any unmatched routes, allowing React Router to handle client-side routing
# The error_page directive is used to handle server errors and serve a custom 50x.html page
# Make sure to build your React app with the correct base path using `vite build --base /telechargement/`
# Ensure that the Nginx server has access to the built files in /usr/share/nginx/html/
# To run this configuration, save it as /etc/nginx/conf.d/default.conf and restart the Nginx service
# Example command to restart Nginx: sudo systemctl restart nginx
# Note: Adjust the listen port and server_name as needed for your deployment environment
# This configuration is suitable for production environments where the React app is served from a subdirectory
# Ensure that the Nginx server has the necessary permissions to read the files in /usr/share/nginx/html/
# You can test this configuration by accessing http://localhost:8080/telechargement/ in your web browser
# If you encounter any issues, check the Nginx error logs for more information
# Example command to check Nginx error logs: sudo tail -f /var/log/nginx/error.log
# This configuration is designed to work with the Vite build process, which generates static files for the React app
# Make sure to run `vite build` before deploying the app to ensure that the static files are generated correctly
# If you need to serve additional static files or assets, you can add more location blocks as needed
# This configuration is optimized for serving a React app with client-side routing
# If you need to handle API requests, you can add additional location blocks for those endpoints
# For example, you can add a location block for /api/ to proxy requests to a backend server
# Make sure to test the configuration in a staging environment before deploying it to production